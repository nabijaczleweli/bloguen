<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'>
  <title>bloguen(1) - Generate a blogue from a flat TOML-based descriptor</title>
  <style type='text/css' media='all'>
  /* style: man */
  body#manpage {margin:0}
  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}
  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}
  .mp h2 {margin:10px 0 0 0}
  .mp > p,.mp > pre,.mp > ul,.mp > ol,.mp > dl {margin-left:8ex}
  .mp h3 {margin:0 0 0 4ex}
  .mp dt {margin:0;clear:left}
  .mp dt.flush {float:left;width:8ex}
  .mp dd {margin:0 0 0 9ex}
  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}
  .mp pre {margin-bottom:20px}
  .mp pre+h2,.mp pre+h3 {margin-top:22px}
  .mp h2+pre,.mp h3+pre {margin-top:5px}
  .mp img {display:block;margin:auto}
  .mp h1.man-title {display:none}
  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}
  .mp h2 {font-size:16px;line-height:1.25}
  .mp h1 {font-size:20px;line-height:2}
  .mp {text-align:justify;background:#fff}
  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}
  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}
  .mp u {text-decoration:underline}
  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}
  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}
  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}
  .mp b.man-ref {font-weight:normal;color:#434241}
  .mp pre {padding:0 4ex}
  .mp pre code {font-weight:normal;color:#434241}
  .mp h2+pre,h3+pre {padding-left:0}
  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}
  ol.man-decor {width:100%}
  ol.man-decor li.tl {text-align:left}
  ol.man-decor li.tc {text-align:center;letter-spacing:4px}
  ol.man-decor li.tr {text-align:right;float:right}
  </style>
</head>
<!--
  The following styles are deprecated and will be removed at some point:
  div#man, div#man ol.man, div#man ol.head, div#man ol.man.

  The .man-page, .man-decor, .man-head, .man-foot, .man-title, and
  .man-navigation should be used instead.
-->
<body id='manpage'>
  <div class='mp' id='man'>

  <div class='man-navigation' style='display:none'>
    <a href="#NAME">NAME</a>
    <a href="#SYNOPSIS">SYNOPSIS</a>
    <a href="#DESCRIPTION">DESCRIPTION</a>
    <a href="#OPTIONS">OPTIONS</a>
    <a href="#DESCRIPTOR-FORMAT">DESCRIPTOR FORMAT</a>
    <a href="#POST-DISCOVERY">POST DISCOVERY</a>
    <a href="#METADATA-FORMAT">METADATA FORMAT</a>
    <a href="#FORMAT-FORMAT">FORMAT FORMAT</a>
    <a href="#DATE-FORMAT">DATE FORMAT</a>
    <a href="#AUTHOR">AUTHOR</a>
    <a href="#SPECIAL-THANKS">SPECIAL THANKS</a>
    <a href="#REPORTING-BUGS">REPORTING BUGS</a>
    <a href="#SEE-ALSO">SEE ALSO</a>
  </div>

  <ol class='man-decor man-head man head'>
    <li class='tl'>bloguen(1)</li>
    <li class='tc'></li>
    <li class='tr'>bloguen(1)</li>
  </ol>

  <h2 id="NAME">NAME</h2>
<p class="man-name">
  <code>bloguen</code> - <span class="man-whatis">Generate a blogue from a flat TOML-based descriptor</span>
</p>

<h2 id="SYNOPSIS">SYNOPSIS</h2>

<p><code>bloguen</code> IN_DIR OUT_DIR</p>

<h2 id="DESCRIPTION">DESCRIPTION</h2>

<p>Generate an ePub book from a simple plaintext descriptor.</p>

<p>Exit values and possible errors:</p>

<pre><code>1 - I/O error
2 - parsing error
3 - file not found
4 - file in wrong state
5 - file parsing failed
6 - required element missing
</code></pre>

<h2 id="OPTIONS">OPTIONS</h2>

<p>  IN_DIR</p>

<pre><code>File to parse, must exist, must comply with the DESCRIPTOR FORMAT.
</code></pre>

<p>  OUT_DIR</p>

<pre><code>File to write the book to, parent directory needn't exist.
</code></pre>

<h2 id="DESCRIPTOR-FORMAT">DESCRIPTOR FORMAT</h2>

<p>Blogue descriptors are TOML files named <code>blogue.toml</code>,
where all keys except for <code>name</code> are optional:</p>

<pre><code># The blogue's display name.
name = 'Блогг'

# The blogue's main author(s).
#
# Overriden by post metadata, if present.
#
# If not present, defaults to the current system user's name,
# which, if not detected, errors out.
author = 'nabijaczleweli'

# Data to put before post HTML, templated.
#
# Default: `"$ROOT/header.html"`, then `"$ROOT/header.htm"`.
header_file = 'header.html'

# Data to put after post HTML, templated.
#
# Default: `"$ROOT/footer.html"`, then `"$ROOT/footer.htm"`.
footer_file = 'footer.html'

# Subfolder to move assets to, relative to the output root, if present.
#
# The value is stripped of leading slashes.
# All backslashes are normalised to forward ones.
# The value is ended off with a slash, if not already specified.
#
# No override is applied if not present – assets are copied alongside the posts' HTML.
asset_dir_override = 'assets/'

# Default post language.
#
# Overriden by post metadata, if present.
#
# If not present, defaults to the current system language,
# which, if not detected, defaults to en-GB.
language = 'en-GB'

# A set of style descriptors.
#
# If not present, defaults to empty.
styles = ['link://nabijaczleweli.xyz/kaschism/assets/column.css'
          'literal:.indented { text-indent: 1em; }',
          'file:common.css']

# A set of style descriptors.
#
# If not present, defaults to empty.
scripts = ['link:/content/assets/syllable.js',
           'literal:document.getElementById(\"title\").innerText = \"Наган\";',
           'file:MathJax-config.js']

# Where and which machine datasets to put.
#
# Each value here is a prefix appended to the output directory
# under which to put the machine data.
#
# Values can't be empty (to put machine data at post root use "./").
[machine_data]
JSON = 'machine/'

# Where and which feeds to put.
#
# Each value here is a file path appended to the output directory
# into which to put the machine data.
[feeds]
RSS = 'feeds/rss.xml'
Atom = 'atom.xml'

# Additional static data to substitute in header and footer for all posts.
#
# If not present, defaults to empty.
[data]
key_1 = 'data_1'
key_2 = 'data_2'

# Metadata specifying how to generate the blogue index file.
#
# If not present, index not generated.
#
# All keys are optional
[index]
# Data to put start index HTML with, templated.
#
# Default: `"$ROOT/index_header.html"`, then `"$ROOT/index_header.htm"`,
#     then `"$ROOT/idx_header.html"`, then `"$ROOT/idx_header.htm"`.
header_file = 'index_header.html'

# Data to put in index HTML for each post, templated.
#
# Default: `"$ROOT/index_center.html"`, then `"$ROOT/index_center.htm"`,
#     then `"$ROOT/idx_center.html"`, then `"$ROOT/idx_center.htm"`.
center_file = 'index_center.html'

# Data to put to end index HTML with, templated.
#
# Default: `"$ROOT/index_footer.html"`, then `"$ROOT/index_footer.htm"`,
#     then `"$ROOT/idx_footer.html"`, then `"$ROOT/idx_footer.htm"`.
footer_file = 'index_footer.html'

# The order to put center templates in.
#
# If not present, defaults to forward.
center_order = "forward|backward"

# A set of style descriptors.
#
# If not present, defaults to empty.
styles = ['link://nabijaczleweli.xyz/kaschism/assets/column.css'
          'literal:.indented { text-indent: 1em; }',
          'file:common.css']

# A set of style descriptors.
#
# If not present, defaults to empty.
scripts = ['link:/content/assets/syllable.js',
           'literal:document.getElementById(\"title\").innerText = \"Наган\";',
           'file:MathJax-config.js']

# Additional static data to substitute in header and footer.
#
# If not present, defaults to empty.
[data]
index_key_1 = 'index_data_1'
index_key_2 = 'index_data_2'
</code></pre>

<h2 id="POST-DISCOVERY">POST DISCOVERY</h2>

<p>Posts reside in directories parallel to <code>blogue.toml</code>,
whose names match <code>#+. YYYY-MM-DD [HH-MM[-SS]] name</code>,
in files named <code>post.md</code>.</p>

<p>In addition to <code>post.md</code>, the folder may contain
automatically-copied assets,
a <code>tags</code> file containing one tag per line,
and a <code>metadata.toml</code>, which obeys the <a href="#METADATA-FORMAT" data-bare-link="true">METADATA FORMAT</a></p>

<h2 id="METADATA-FORMAT">METADATA FORMAT</h2>

<p>Additional post metadata is contained in files named <code>metadata.toml</code>, where all keys are optional:</p>

<pre><code># Post language override.
#
# If not present, default post language is used.
language = "pl"

# Post author override.
#
# If not present, default post author is used.
author = "Enet4"

# A set of tags.
#
# If not present, defaults to empty.
#
# Added to tags in the tags file
tags = ["maths", "abstract"]

# A set of style descriptors.
#
# If not present, defaults to empty.
styles = ['link://nabijaczleweli.xyz/kaschism/assets/column.css'
          'literal:.indented { text-indent: 1em; }',
          'file:common.css']

# A set of style descriptors.
#
# If not present, defaults to empty.
scripts = ['link:/content/assets/syllable.js',
           'literal:document.getElementById(\"title\").innerText = \"Наган\";',
           'file:MathJax-config.js']

# Additional static data to substitute in header and footer.
#
# If not present, defaults to empty.
[data]
post_key_1 = 'post_data_1'
post_key_2 = 'post_data_2'
</code></pre>

<h2 id="FORMAT-FORMAT">FORMAT FORMAT</h2>

<p>The post header and footer, as well as index header, center, and footer are formatted in a Rust-format-like fashion,
where <code>{var}</code> denotes the insertion of variable <code>var</code>, and <code>{{</code>/<code>}}</code> literal <code>{</code>/<code>}</code>.</p>

<pre><code>language                – post language in BCP47 format
                        – en-GB
number                  – default-formatted post number
                        – 14
title                   – post title
                        – release-front - a generic release front-end
author                  – post author
                        – nabijaczleweli
raw_post_name           – post name as it appeared on the filesystem
                        – 004. 2018-03-30 Stir plate
normalised_post_name    – normalised post name
                        – 004. 2018-03-30 06-00-51 Stir plate
blog_name               – blog name
                        – Блогг
bloguen-version         – current version of bloguen
                        – v0.1.0
tags                    – ↓
                        – &lt;span class="post-tag"&gt;maths&lt;/span&gt;…
tags()                  – all post tags with the default class (post-tag)
                        – &lt;span class="post-tag"&gt;maths&lt;/span&gt;…
tags(class)             – all post tags with the specified class, headers and footers
                        – &lt;span class="пост-таг"&gt;maths&lt;/span&gt;…
styles                  – all post styles with their headers and footers
                        – &lt;style type="text/css"&gt;* {color: magenta;}&lt;/style&gt;…
scripts                 – all post scripts with their headers and footers
                        – &lt;script type="text/javascript"&gt;alert("hewwo")&lt;/script&gt;…
data-name               – passed-in data under the name key
                        – hewwo
date(post, format)      – post date formatted with DATE FORMAT
                        – Thu,  6 Sep 2018 18:32:22 +0200
date(now_utc, format)   – current date in UTC formatted with DATE FORMAT
                        – Thu,  6 Sep 2018 18:32:22 +0200
date(now_local, format) – current date in local timezone formatted with DATE FORMAT
                        – Thu,  6 Sep 2018 18:32:22 +0200
machine_data(kind)      – machine data of the specified kind
                        – {"number": 3, "language": "en-GB", …}…
pass_paragraphs(n, var) – parse var and write up to n HTML paragraphs of its contents
                        – &lt;p&gt;Paragraph 1&lt;/p&gt; &lt;p&gt;Paragraph 2&lt;/p&gt;…
</code></pre>

<h2 id="DATE-FORMAT">DATE FORMAT</h2>

<p>Any of: rfc2822, rfc_2822, RFC2822, RFC_2822 – RFC2822</p>

<p>Any of: rfc3339, rfc_3339, RFC3339, RFC_3339 – RFC3339</p>

<p>Anything else: <code>strftime()</code> format</p>

<h2 id="AUTHOR">AUTHOR</h2>

<p>Written by nabijaczleweli &lt;<a href="&#x6d;&#97;&#105;&#x6c;&#116;&#111;&#58;&#110;&#x61;&#98;&#105;&#106;&#97;&#99;&#x7a;&#108;&#101;&#x77;&#101;&#108;&#105;&#x40;&#x67;&#x6d;&#97;&#105;&#108;&#x2e;&#x63;&#x6f;&#109;" data-bare-link="true">&#110;&#x61;&#98;&#x69;&#106;&#x61;&#x63;&#122;&#108;&#x65;&#119;&#101;&#108;&#105;&#x40;&#103;&#109;&#97;&#x69;&#x6c;&#46;&#99;&#111;&#x6d;</a>&gt;</p>

<h2 id="SPECIAL-THANKS">SPECIAL THANKS</h2>

<p>To all who support further development, in particular:</p>

<ul>
<li>ThePhD</li>
</ul>


<h2 id="REPORTING-BUGS">REPORTING BUGS</h2>

<p>&lt;<a href="https://github.com/nabijaczleweli/bloguen/issues" data-bare-link="true">https://github.com/nabijaczleweli/bloguen/issues</a>&gt;</p>

<h2 id="SEE-ALSO">SEE ALSO</h2>

<p>&lt;<a href="https://github.com/nabijaczleweli/bloguen" data-bare-link="true">https://github.com/nabijaczleweli/bloguen</a>&gt;</p>


  <ol class='man-decor man-foot man foot'>
    <li class='tl'>bloguen developers</li>
    <li class='tc'>August 2019</li>
    <li class='tr'>bloguen(1)</li>
  </ol>

  </div>
</body>
</html>
